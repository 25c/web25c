- content_for :title, (@user.display_name + t('.title'))
- if @is_editable
  - content_for :js do
    = javascript_include_tag "edit-profile"
    :javascript
      window.updateProfileUrl = '#{ j update_profile_url }';
      window.youtubeId = '#{ j @button.youtube_id }';
      window.hasButtonPicture = '#{ @button.picture.exists? }' == 'true';
      window.buttonUpdateUrl = '#{ j home_update_button_url }';

%iframe#upload-picture{:src => upload_picture_path }
#profile-container
  = simple_form_for @user, :url => update_profile_path, :html => { :multipart => true } do |f|
    .row.main-content
      / .span11
      /   %h2.page-header= @user.display_name + t('.title')
      .span4.buffer
        #user-profile
          .block
            .input-block
              - if @is_editable
                #upload-user-picture.btn= t('.picture_upload')
                #picture-block
            = image_tag(@user.picture, :id => 'user-picture')
          .block#name-block
            - if @is_editable
              .input-block
                %input{:type => 'text', :name => 'user[first_name]', 
                  :value => @user.first_name.blank? ? t('.first_name_default') : @user.first_name,
                  :id => 'first_name_input'}
                %input{:type => 'text', :name => 'user[last_name]', 
                :value => @user.last_name.blank? ? t('.last_name_default') : @user.last_name,
                :id => 'last_name_input'}
            %p.content-block.emphasis
              =@user.first_name.blank? ? t('.enter_name') :  @user.first_name
              =@user.last_name.blank? ? '' : @user.last_name
          .block#about-block.clear
            .input-block
              %textarea{:id => 'about', :name => 'user[about]', :rows => 3}
                =@user.about.blank? ? t('.enter_about') : @user.about
      .span7.buffer
        #button-holder
          <a href="https://www.plus25c.com/tip/#{@button.uuid}" class="tip-25c-button" data-size="btn-large">#{@button.title}</a><script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];    if(!d.getElementById(id)){js=d.createElement(s);js.id=id;    js.src="//#{ENV["API25C_URL"]}/public/javascripts/button.js";fjs.parentNode.insertBefore(js,fjs);}}    (document,"script","tip-25c-js");</script>
        #button-fields
          #button-title-block.block
            .input-block
              Choose a donation purpose:
              %input{:type => 'text', :name => 'button[title]', 
              :value => @button.title.blank? ? t('.button_title_default') : @button.title,
              :id => 'button_title_input'}
            .content-block
              %h3#profile-button-title Click the 25c button to donate to #{@button.title}
        
        
        - if not @button.youtube_id.empty?
          #youtube-embed-container
          #button-picture-container.hide
        - elsif @button.picture.exists?
          #youtube-embed-container.hide
          #button-picture-container
            = image_tag(@button.picture, :id => 'button-picture')
        - elsif @is_editable
          #youtube-embed-container.hide
          #button-picture-container.hide
        - if @is_editable
          .update-button-field
            %span#remove-button-video.btn.hide Remove Video
          .update-button-field
            %span#remove-button-picture.btn.hide Remove Image
          .update-button-field
            #upload-button-picture.btn Upload New Project Image
          %label Or upload a new Youtube video:
          %input{:type => 'text', :name => 'button[youtube_link]', :id => 'upload-youtube-url'}
          #youtube-button.btn Save
          
      - if @user.show_donations
        .span11
          %h3.table-title
            = @user.display_name + t('.tips_title')
          .table-wrapper
            %table#clicks-given.clicks-table.table.table-condensed.table-striped
              %thead
                %tr
                  %th.click-amount= t('.amount')
                  %th.click-provider= t('.provider')
                  %th.click-referrer= t('.referrer')
              %tbody
                - if @click_sets.length > 0
                  - @click_sets.each do |set|
                    %tr
                      %td.click-amount #{set[0]}
                      %td.click-user= set[1].button.user.display_name
                      %td.click-referrer= link_to set[1].referrer, set[1].referrer, :target => "_blank"
                - else
                  %tr
                    %td.click-amount 0
                    %td.click-user= t('.no_clicks')
                    %td.click-referrer
  