$(document).ready(function(){
  
  // lookup dictionary for image filenames
  var imageDict = {
    large: "<%= asset_path '25c-button-large.png' %>",
    medium: "<%= asset_path '25c-button-medium.png' %>",
    icon: "<%= asset_path '25c-button-icon.png' %>"
  };
  
  var updateButtonImage = function(newSize) {
    // replace button preview image if new size is valid
    var path = imageDict[newSize];
    if (path) {
      $('#button-preview-image').attr('src', path).load(function() {
        $(this).show();
      });
    }
    var sizeParam = '&size=' + newSize
    $('#button-code-params').html(sizeParam);
  };
  
  // initialize button preview image
  var buttonSize = $('.radio_buttons:checked').val();
  updateButtonImage(buttonSize);
  
  // when radio buttons change, update image accordingly
  $('.radio_buttons').change(function() {
    var $this = $(this);
    if ($this.attr('checked')) {
      updateButtonImage($this.val());
    }
  });
  
  // when submit happens show saving
  $('form.edit_button').submit(function() {
    $('input[type="submit"]').attr('disabled', 'disabled');
    $('#save-button-message').show();
  });
  
});